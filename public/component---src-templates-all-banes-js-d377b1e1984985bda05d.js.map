{"version":3,"sources":["webpack://gatsby-starter-default/./src/templates/allBanes.js"],"names":["baneAttributes","useStyles","makeStyles","baneSection","fontSize","marginBottom","baneContainer","backgroundImage","margin","baneAccordion","paddingTop","paddingBottom","maxHeight","display","transition","overflow","accordBtnContainer","accordionBtn","justifyContent","left","padding","lineHeight","minHeight","background","minWidth","fontWeight","width","position","alignItems","accordionExpanded","individualBaneLink","backgroundColor","marginLeft","height","borderRadius","boxShadow","location","data","classes","banes","console","useState","queryString","searchParams","setSearchParams","textSearchVal","setTextSearchVal","visibility","setVisibility","baneHeadings","attributeList","updateTextSearch","event","updateSearchParams","currentLocation","handleClearSearchText","headings","className","onClick","regex","RegExp","show","matched","item","Object","paramKeys","powerLevels","powerParam","i","param","slugName","key","index","id","style","title","to","e","path","url","navigator","effect","parseStrToHtml"],"mappings":"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","file":"component---src-templates-all-banes-js-d377b1e1984985bda05d.js","sourcesContent":["import React, { useState } from 'react';\nimport { graphql } from 'gatsby';\n\nimport {default as parseStrToHtml} from 'html-react-parser';\nimport * as queryString from 'query-string';\n\nimport Image from '../img/paper_bg.png';\nimport SearchBarBanesBoons from '../components/searchbar-banes-boons';\nimport CoreTOC from '../components/core-toc';\nimport NavLayout from '../layouts/nav-layout';\n\nimport Divider from '@material-ui/core/Divider';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport ButtonBase from '@material-ui/core/ButtonBase';\nimport { IconButton } from 'gatsby-theme-material-ui';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport AddIcon from '@material-ui/icons/Add';\nimport RemoveIcon from '@material-ui/icons/Remove';\nimport ReplyIcon from '@material-ui/icons/Reply';\nimport LinkIcon from '@material-ui/icons/Link';\n\n\nconst baneAttributes = [\n  'Creation',\n  'Energy',\n  'Entropy',\n  'Influence',\n  'Might',\n  'Persuasion',\n  'Presence',\n  'Alteration',\n  'Agility',\n  'Movement',\n  'Prescience',\n  'Protection',\n  'Deception'\n]\n\nconst useStyles = makeStyles((theme) => ({\n  baneSection: {\n    fontSize: '16px',\n    '& li': {\n      marginBottom: '16px'\n    }\n  },\n  baneContainer: {\n    backgroundImage: `url(${Image})`,\n    margin: '0 24px',\n  },\n  baneAccordion: {\n    paddingTop: '16px',\n    paddingBottom: '16px',\n    fontSize: '16px',\n    maxHeight: '9999px',\n    display: 'block',\n    transition: 'height .6s linear',\n    overflow: 'hidden',\n  },\n  accordBtnContainer: {\n    display: 'inline-block',\n    margin: '8px 0',\n    fontSize: '16px'\n  },\n  accordionBtn: {\n    justifyContent: 'start',\n    left: 5,\n    padding: '0 6px',\n    margin: '6px 8px',\n    lineHeight: '36px',\n    minHeight: '36px',\n    background: 'transparent',\n    minWidth: '88px',\n    fontWeight: '500',\n    width: '100%',\n    position: 'relative',\n    alignItems: 'center',\n    display: 'flex'\n  },\n  accordionExpanded: {\n    maxHeight: 0,\n    paddingTop: '16px',\n    paddingBottom: '16px',\n    fontSize: '16px',\n    display: 'block',\n    transition: 'height .6s linear',\n    overflow: 'hidden',\n  },\n  individualBaneLink: {\n    backgroundColor: 'rgba(89,65,160,0.7)',\n    position: 'relative',\n    marginLeft: '16px',\n    height: '30px',\n    width: '30px',\n    minWidth: 0,\n    lineHeight: '40px',\n    borderRadius: '50%',\n    boxShadow: '0 2px 5px 0 rgba(0, 0, 0, 0.26)',\n  },\n}))\n\nconst BanesPageContent = ({ location, data }) => {\n  const classes = useStyles();\n  const banes = data.allBanesBanesYaml.nodes\n  console.log('data', banes)\n  const [searchParams, setSearchParams] = useState(queryString.parse(location.search));\n  const [textSearchVal, setTextSearchVal] = useState('');\n  const [visibility, setVisibility] = useState(true);\n\n  \n  const updateSearchParams = (currentLocation) => {\n    setSearchParams(queryString.parse(currentLocation.search))\n  }\n  \n  const updateTextSearch = (event) => {\n    setTextSearchVal(event.target.value);\n  }\n\n  const handleClearSearchText = () => {\n    setTextSearchVal('')\n  }\n\n  const handleVisibility = () => {\n    setVisibility(!visibility);\n  }\n\n  const handleCopyToClipboard = param => e => {\n    e.preventDefault();\n    const path = `${location.pathname.replace(/s/, '')}/${param}`.replace('//', '/')\n    const url = `${location.origin}${path}`;\n    navigator.clipboard.writeText(url).then(() => {}, () => {})\n  }\n\n\n  let baneHeadings = [];\n\n  return (\n\n    <div>\n      <NavLayout>\n      <SearchBarBanesBoons \n        attributeList={baneAttributes} \n        textSearchVal={textSearchVal} \n        updateTextSearch={updateTextSearch} \n        updateSearchParams={updateSearchParams} \n        handleClearSearchText={handleClearSearchText}\n      /> \n      <CoreTOC headings={baneHeadings} />\n      <div className={classes.baneContainer}>\n        <div className={classes.accordBtnContainer} >\n          <ButtonBase onClick={handleVisibility} className={classes.accordionBtn} >\n            {visibility ? <RemoveIcon /> : <AddIcon />}\n            {visibility ? 'HIDE EXPLANATION' : 'SHOW EXPLANATION'}\n          </ButtonBase>\n        </div>\n        <div className={`${visibility ? classes.banesAccordion : classes.accordionExpanded}`}>\n          <h1>BANES</h1>\n          <h2>Reading a Bane Description</h2>\n          <p>Below, each bane description includes the following elements.</p>\n          <p><strong>Power Level. </strong>This number indicates the required attribute score needed to inflict the bane. If multiple power levels are listed (such as 2 / 4 / 6), then the bane can be inflicted at multiple tiers of power. The Persistent Damage bane, for example, deals increased damage as you inflict it at higher power levels.</p>\n          <p><strong>Attack Attributes. </strong>This is a list of the attribute or attributes that can be used to inflict the bane. As long as you possess at least one of the listed attributes at a score greater than or equal to the Power Level, then you can inflict the bane.</p>\n          <p><strong>Attack. </strong>This list indicates what type of attack roll to make when inflicting the bane. Each entry consists of an attribute that the attacking player should roll and the defense score targeted by the attack. If the attacker’s roll equals or exceeds the target’s defense score, then the bane is inflicted.</p>\n          <p><strong>Duration. </strong>A bane typically remains in effect until the target resists it using a resist action, hence most banes have a duration of “resist ends”. If a target fails three resist rolls against a bane, the bane can no longer be resisted. It persists for an extended duration indicated in parentheses.</p>\n          <p><strong>Description. </strong>This entry simply provides a general idea of what the bane could look like in the story.</p>\n          <p><strong>Effect. </strong>This entry indicates the mechanical effects of the bane on the rules of the game.</p>\n          <p></p>\n          <Divider />\n        </div>\n\n        \n        {banes.map((data, index) => {\n          if (textSearchVal !== '') {\n            const regex = new RegExp(textSearchVal, 'gi');\n            let show = false;\n            show = data.name.match(regex) || data.description.match(regex) || data.effect.match(regex);\n            if(!show) return null;\n          }\n\n          const matched = [];\n          data.attackAttributes.forEach(item => {\n            const paramKeys = Object.keys(searchParams)?.map(item => item.toLowerCase());\n            if (paramKeys.indexOf(item.toLowerCase()) > -1) matched.push(item);\n          });\n          const powerLevels = Object.values(searchParams)?.map(powerParam => {\n            for (let i = 0; i < powerParam.length; i++) {\n              if (data.power[i] <= powerParam ) return true;\n            }\n            return false;\n          });\n\n          if (Object.keys(searchParams)?.length > 0 && matched?.length < 1) return null;\n          if (powerLevels[0] === false) return null;\n\n          \n\n          baneHeadings.push(data.name);\n\n          const slugName = data.name.toLowerCase().replace(/\\s+/, '-')\n\n          return (\n            <div className={classes.baneSection} key={index}>\n              <h2 id={slugName} style={{ lineHeight: '40px', marginBottom: '36px'  }}>\n                {data.name}\n                <Tooltip title='View this Bane'>\n                  <IconButton className={classes.individualBaneLink} to={`/bane/${slugName}`}>\n                    <ReplyIcon />\n                  </IconButton>\n                </Tooltip>\n                <Tooltip title='Copy Link'>\n                  <IconButton className={classes.individualBaneLink} onClick={handleCopyToClipboard(slugName)}>\n                    <LinkIcon />\n                  </IconButton>\n                </Tooltip>\n              </h2>\n              <p></p>\n              <p></p>\n              <p><strong>Duration: </strong>{data.duration}</p>\n              <p><strong>Power Level: </strong>{data.power.map((item, index) => {\n                  if (index < data.power.length - 1) return `${item}/ `;\n                  return item;\n                })}\n              </p>\n              <p><strong>Attack Attributes: </strong>{data.attackAttributes.map((item, index) => {\n                  if (index < data.attackAttributes.length - 1) return `${item}, `;\n                  return item;\n                })}\n              </p>\n              <p><strong>Attack: </strong></p>\n              <p></p>\n              <ul>\n                {data.attack.map((item, index) => {\n                  return (\n                    <li key={index}>{item}</li>\n                  )\n                })}\n              </ul>\n              <p><strong>Description</strong></p>\n              <p>{data.description}</p>\n              <p><strong>Effect</strong></p>\n              <div className={classes.effect}>{parseStrToHtml(data.effect)}</div>\n              <p></p> \n              <Divider />\n            </div>\n          )\n        })\n        }\n      </div>\n    </NavLayout>\n    </div>\n  ) \n}\n\nexport const query = graphql`\n  query BanesQuery {\n    allBanesBanesYaml {\n      nodes {\n        attack\n        attackAttributes\n        description\n        duration\n        effect\n        id\n        invocationTime\n        name\n        power\n        special\n      }\n    }\n  }\n`\n\nexport default BanesPageContent;\n"],"sourceRoot":""}